# ============================================================================
# AI APP BUILDER - ENVIRONMENT VARIABLES
# ============================================================================
# Copy this file to .env.local and fill in your values
# NEVER commit .env.local to version control!
# 
# QUICK SETUP CHECKLIST:
# [ ] Replace all placeholders with actual values
# [ ] Generate secrets using: openssl rand -base64 32
# [ ] Verify DATABASE_URL connection
# [ ] Test API keys work in development
# [ ] Add production values to Vercel/your hosting platform
# ============================================================================

# ============================================================================
# üî¥ CRITICAL - REQUIRED FOR APPLICATION TO RUN
# ============================================================================

# Anthropic AI (for code generation)
ANTHROPIC_API_KEY="sk-ant-api03-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX-REPLACE_WITH_YOUR_KEY"

# Database Connection (PostgreSQL via Prisma)
# pgbouncer=true: Use with connection pooler (port 6543)
# connection_limit: Max connections per pool (10-20 recommended for serverless)
# pool_timeout: How long to wait for connection (10 seconds)
# connect_timeout: TCP connection timeout (10 seconds)
DATABASE_URL="postgresql://YOUR_USERNAME:YOUR_PASSWORD@YOUR_HOST:6543/YOUR_DATABASE?pgbouncer=true&connection_limit=10&pool_timeout=10&connect_timeout=10"
DIRECT_URL="postgresql://YOUR_USERNAME:YOUR_PASSWORD@YOUR_HOST:5432/YOUR_DATABASE"

# NextAuth Secret (generate with: openssl rand -base64 32)
NEXTAUTH_SECRET="generate-with-openssl-rand-base64-32"
NEXTAUTH_URL="http://localhost:3000"

# Rate Limiting (Upstash Redis) - REQUIRED for production
UPSTASH_REDIS_REST_URL="https://your-redis.upstash.io"
UPSTASH_REDIS_REST_TOKEN="your-upstash-token"

# ============================================================================
# üí≥ PAYMENT PROCESSING (STRIPE)
# ============================================================================

# Stripe API Keys
STRIPE_SECRET_KEY="sk_test_XXXXXXXXXXXXXXXXXXXXXXXX_REPLACE_ME"
STRIPE_WEBHOOK_SECRET="whsec_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX_REPLACE_ME"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_XXXXXXXXXXXXXXXXXXXXXXXX_REPLACE_ME"

# Stripe Price IDs (create these in Stripe Dashboard)
STRIPE_PRO_PRICE_ID="price_xxx"
STRIPE_BUSINESS_PRICE_ID="price_xxx"
NEXT_PUBLIC_STRIPE_PRO_PRICE_ID="price_xxx"
NEXT_PUBLIC_STRIPE_BUSINESS_PRICE_ID="price_xxx"

# ============================================================================
# üîê AUTHENTICATION PROVIDERS
# ============================================================================

# GitHub OAuth (for social login & repo integration)
GITHUB_CLIENT_ID="YOUR_GITHUB_CLIENT_ID"
GITHUB_CLIENT_SECRET="YOUR_GITHUB_CLIENT_SECRET"
GITHUB_TOKEN="ghp_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX_REPLACE_ME"

# Google OAuth (Optional)
GOOGLE_CLIENT_ID="your-google-client-id"
GOOGLE_CLIENT_SECRET="your-google-client-secret"

# ============================================================================
# üóÑÔ∏è SUPABASE (OPTIONAL - FOR USER-GENERATED DATABASES)
# ============================================================================

# Public Supabase URL and Keys (safe to expose client-side)
NEXT_PUBLIC_SUPABASE_URL="https://YOUR-PROJECT-ID.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.YOUR_ANON_KEY_JWT_PAYLOAD.YOUR_SIGNATURE"

# Service Role Key (NEVER expose client-side - server use only)
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.YOUR_SERVICE_ROLE_KEY_JWT_PAYLOAD.YOUR_SIGNATURE"

# ============================================================================
# üöÄ VERCEL INTEGRATION (OPTIONAL - FOR DEPLOYMENTS)
# ============================================================================

# Vercel API Token (for auto-deployment features + preview system)
# Get from: https://vercel.com/account/tokens
# Used for: Auto-deployments, Next.js preview deployments
VERCEL_API_TOKEN="your-vercel-api-token"
VERCEL_TOKEN="your-vercel-api-token"
VERCEL_PROJECT_NAME="your-vercel-project-name"
VERCEL_PROJECT_ID="prj_xxxxx"
VERCEL_TEAM_ID="team_xxxxx"

# Vercel OAuth (for Vercel integration features)
VERCEL_CLIENT_ID="your-vercel-client-id"
VERCEL_CLIENT_SECRET="your-vercel-client-secret"

# ============================================================================
# üñ•Ô∏è PREVIEW SYSTEM (OPTIONAL - FOR NEXT.JS PREVIEW DEPLOYMENTS)
# ============================================================================

# Cron Job Authentication Secret
# Generate with: openssl rand -base64 32
# Used for: Cleanup cron job authentication
CRON_SECRET="generate-with-openssl-rand-base64-32"

# ============================================================================
# üìß EMAIL SERVICE (CHOOSE ONE PROVIDER)
# ============================================================================

# Option 1: Resend (Recommended - https://resend.com)
# Simple, modern API with generous free tier
RESEND_API_KEY="re_your-resend-api-key"

# Option 2: SendGrid (https://sendgrid.com)
# Enterprise-grade with advanced analytics
SENDGRID_API_KEY="SG.your-sendgrid-api-key"

# Email Configuration (works with any provider)
EMAIL_FROM="noreply@yourdomain.com"              # Default sender address
CONTACT_EMAIL="support@yourdomain.com"           # Where contact forms send to

# Sender addresses ‚Äî used by lib/email.ts getSender()
RESEND_NOREPLY_EMAIL="BuildFlow <noreply@buildflow-ai.app>"
RESEND_SUPPORT_EMAIL="BuildFlow Support <support@buildflow-ai.app>"
RESEND_BILLING_EMAIL="BuildFlow Billing <billing@buildflow-ai.app>"
RESEND_MARKETING_EMAIL="BuildFlow Team <marketing@buildflow-ai.app>"
RESEND_NEWSLETTER_EMAIL="newsletter@buildflow-ai.app"

# Inbox that RECEIVES contact form submissions and forwarded inbound emails
# Must be a real deliverable address (your Gmail etc.) ‚Äî NOT @buildflow-ai.app (causes loops)
SUPPORT_INBOX_EMAIL="your-team@gmail.com"

# Resend Inbound webhook signing secret
# Get from: Resend Dashboard ‚Üí Domains ‚Üí buildflow-ai.app ‚Üí Inbound ‚Üí Signing Secret
RESEND_WEBHOOK_SECRET="whsec_xxxxxxxxxxxxxxxxxxxx"

# ============================================================================
# üîí ENCRYPTION & SECURITY
# ============================================================================

# Encryption key for sensitive data (generate with: openssl rand -base64 32)
ENCRYPTION_KEY="your-32-byte-encryption-key"

# Alternative encryption keys (optional fallback chain)
ENCRYPTION_KEY_2="backup-encryption-key"
ENCRYPTION_KEY_3="another-backup-key"

# ============================================================================
# üêõ ERROR TRACKING (SENTRY)
# ============================================================================

# Sentry DSN (for error monitoring)
NEXT_PUBLIC_SENTRY_DSN="https://examplePublicKey@o0.ingest.sentry.io/0"
SENTRY_AUTH_TOKEN="your-sentry-auth-token"
SENTRY_ORG="your-org-name"
SENTRY_PROJECT="your-project-name"

# ============================================================================
# ‚è∞ CRON & BACKGROUND JOBS
# ============================================================================

# Cron secret (for protecting cron endpoints like drip emails)
CRON_SECRET="generate-random-secret-for-cron-jobs"

# ============================================================================
# ‚öôÔ∏è APPLICATION SETTINGS
# ============================================================================

# Public App Information
NEXT_PUBLIC_APP_URL="http://localhost:3000"
NEXT_PUBLIC_APP_NAME="BuildFlow"

# Admin Configuration
ADMIN_EMAILS="admin@buildflow-ai.app"
# Alert email ‚Äî receives DB disk / backup / rate-limit alert emails (falls back to ADMIN_EMAILS)
ALERT_EMAIL="alerts@buildflow-ai.app"
# DB size thresholds (MB) ‚Äî override defaults in /api/cron/db-health
DB_SIZE_WARN_MB="400"
DB_SIZE_CRIT_MB="475"
DB_SIZE_LIMIT_MB="500"

# Node Environment
NODE_ENV="development"

# ============================================================================
# üîß OPTIONAL - THIRD-PARTY INTEGRATIONS
# ============================================================================

# IP Geolocation Service (optional - for enhanced security features)
# IPGEOLOCATION_API_KEY="your-ipgeo-api-key"

# Analytics (optional)
# NEXT_PUBLIC_GA_ID="G-XXXXXXXXXX"
# NEXT_PUBLIC_POSTHOG_KEY="phc_your-posthog-key"

# File Storage ‚Äî Vercel Blob (required for image upload / media library)
# Get token from: Vercel Dashboard ‚Üí Storage ‚Üí Create Blob store ‚Üí .env.local
BLOB_READ_WRITE_TOKEN="vercel_blob_rw_xxxxxxxxxxxxxxxxxxxx"

# Analytics ‚Äî PostHog (product analytics: events, funnels, DAU/WAU/MAU)
# Get from: https://app.posthog.com ‚Üí Project Settings ‚Üí Project API Key
NEXT_PUBLIC_POSTHOG_KEY="phc_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
NEXT_PUBLIC_POSTHOG_HOST="https://us.i.posthog.com"

# File Storage (optional - legacy S3 placeholder)
# AWS_ACCESS_KEY_ID="your-aws-access-key"
# AWS_SECRET_ACCESS_KEY="your-aws-secret-key"
# AWS_REGION="us-east-1"
# S3_BUCKET_NAME="your-bucket-name"

# ============================================================================
# üß™ DEVELOPMENT ONLY (DO NOT SET IN PRODUCTION)
# ============================================================================

# Enable debug logging
# DEBUG="true"

# Disable rate limiting in development
# DISABLE_RATE_LIMIT="true"

# Mock payment processing in development
# MOCK_STRIPE="true"

# Skip email sending in development
# SKIP_EMAILS="true"

# ============================================================================
# üìã VALIDATION CHECKLIST
# ============================================================================
# 
# Before running the application, verify:
# 
# ‚úÖ All CRITICAL (üî¥) variables are set
# ‚úÖ No placeholder values remain (e.g., "your-api-key-here")
# ‚úÖ Environment-specific URLs are correct (localhost vs production)
# ‚úÖ All secrets are strong and randomly generated
# ‚úÖ File is named .env.local (or .env)
# ‚úÖ File is added to .gitignore
# ‚úÖ Production values are stored in Vercel/hosting platform
# ‚úÖ Database connection works (test with: npm run prisma:studio)
# ‚úÖ Stripe webhooks configured (test with: stripe listen)
# ‚úÖ Redis connection works (test rate limiting endpoints)
# 
# ============================================================================
# üìö DOCUMENTATION
# ============================================================================
# 
# For detailed setup instructions, see:
# - docs/SUPABASE_SETUP_GUIDE.md
# - docs/INTEGRATION_GUIDE.md
# - SETUP-AUTH.md
# 
# For deployment to production:
# - MANUAL-DEPLOYMENT.md
# - AUTO_DEPLOYMENT_INTEGRATION_GUIDE.md
# 
# ============================================================================